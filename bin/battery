#!/usr/bin/env bash

battery="/org/freedesktop/UPower/devices/battery_BAT0"
state=$(upower -i "$battery" | grep 'state' | awk '{print $2}')
percentage=$(upower -i "$battery" | grep 'percentage' | awk '{print $2}' | cut -d"%" -f1)

if [[ $percentage -lt 41 ]]; then
  color="$red"
elif [[ $percentage -lt 80 ]]; then
  color="$yellow"
else
  color="$green"
fi

if [[ "$state" = 'charging' ]]; then
  state='âš¡ '
else
  state=''
fi

echo "#[bold,fg=$color,bg=$blackalt]$state$percentage"
